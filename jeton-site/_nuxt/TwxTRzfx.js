import{Z as b,$ as z,y as A,z as s,a0 as R,a1 as f,a2 as N}from"./D_P8qzRA.js";const G=b(async e=>{let n,p;const a=N(),i=a.public.promotionsSlugs??[],l=a.public.promotionsAllowedCountries,d=!!a.public.promotionsAllowNonEUUK,h=typeof l=="string"&&l.length>0?l.split(",").map(t=>t.trim().toUpperCase()):[],w=new Set(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"]),U=new Set(["GB","UK"]);if(h.length===0&&!d)return;const r=z(e.path)||a.public.defaultLocale||"pt",m=A(e.path),y=Array.isArray(i)?i:Object.values(i||{}),c=t=>"/"+String(t||"").trim().replace(/^\/+|\/+$/g,""),g=c(m),E=c(e.path),S=c(s(r,m)),u=new Set(y.map(c));if(!(u.has(g)||u.has(E)||u.has(S)))return;const C=s(r,"/");if(e.path===C)return;let o="";try{const t=([n,p]=R(()=>$fetch("/api/ipgeo",{timeout:4e3,headers:{"cache-control":"no-cache"}})),n=await n,p(),n);o=String((t==null?void 0:t.countryCode2)||(t==null?void 0:t.country_code)||(t==null?void 0:t.country)||(t==null?void 0:t.countryCode)||(t==null?void 0:t.defaultLanguage)||"").toUpperCase()}catch{return}if(!o)return;if(!d){if(h.includes(o))return;const t=s(r,"/");return window.location.replace(t),f()}const L=w.has(o),P=U.has(o);if(!(L||P))return;const K=s(r,"/");return window.location.replace(K),f()});export{G as default};
